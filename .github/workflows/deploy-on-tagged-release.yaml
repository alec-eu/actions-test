name: Deploy on Tagged Release
on: [push]
  # push:
  #   branches:
  #     - main
  #     - 'releases/**'
  #   tags:
  #      - v1.*
jobs:
  Run-Preflight-Checks:
    runs-on: ubuntu-latest
    steps:
      - name: Run preflight checks
        run: |
          echo "ðŸŽ‰ The job was automatically triggered by an event."

  Deploy-To-Staging:
    runs-on: ubuntu-latest
    needs: [Run-Preflight-Checks]
    environment:
      name: Staging
    steps:
      - name: Update GitOps repo for Production
        run: |
          echo "ðŸŽ‰ The job was automatically triggered by an event."

  Run-Integration-Tests:
    runs-on: ubuntu-latest
    needs: [Deploy-To-Staging]
    steps:
      - name: Pull and configure integration test suite
        run: echo "ðŸŽ‰ The job was automatically triggered by an event."
      - name: Publish test artifacts
        run: echo "ðŸŽ‰ The job was automatically triggered by an event."

  Deploy-To-Production:
    runs-on: ubuntu-latest
    needs: [Run-Integration-Tests]
    environment:
      name: Production
    steps:
      - name: Update GitOps repo for Production
        run: |
          echo "ðŸŽ‰ The job was automatically triggered by an event."
