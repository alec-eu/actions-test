name: terraform
on:
  workflow_dispatch:
    inputs:
      environment:
        description: Terraform Environment
        default: sandbox
        required: true
      component:
        description: Terraform Component
        default: eks
        required: true
      action:
        description: Terraform Action
        default: plan
        required: true
      workspace:
        description: Terraform Workspace
        default: earnup-apps
        required: true
jobs:
  run-terraform:
    name: Check files
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Checkout code
        run: |
          ./scripts/init-and-plan.sh \
            -e $environment \
            -c $component \
            -a $action \
            -w $workspace
